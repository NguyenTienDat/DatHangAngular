"use strict";(self.webpackChunkDatHangAngular=self.webpackChunkDatHangAngular||[]).push([[846],{1846:(_t,v,c)=>{c.r(v),c.d(v,{CustomerModule:()=>ut});var r=c(6895),g=c(7486),t=c(4650),_=c(5849),h=c(7455),C=c(8735),f=c(9717),w=c(1740),M=c(3054),b=c(5593),p=c(4006);function k(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"textarea",13),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.Q6J("autoResize",!0)("ngModel",n.output[e.field])}}function A(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.output[e.field])}}function $(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"textarea",15),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.output[e.field])}}function P(o,s){if(1&o&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",9),t.ynx(4,10),t.YNc(5,k,2,2,"ng-container",11),t.YNc(6,A,2,1,"ng-container",11),t.YNc(7,$,2,1,"ng-container",12),t.BQk(),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","link"),t.xp6(1),t.Q6J("ngSwitchCase","string")}}function Z(o,s){if(1&o&&(t.ynx(0),t.YNc(1,P,8,4,"div",6),t.BQk()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf","_id"!==e.field)}}let J=(()=>{class o{constructor(e,n,i,a,l){this.dialogService=e,this.ref=n,this.firebaseService=i,this.toastService=a,this.commonService=l,this.output={},this.data=this.dialogService.data.data}ngOnInit(){this.output.status=0}changeValue(e,n){this.output[e.field]=n,console.log(e,n),console.log("output",this.output),this.output=JSON.parse(JSON.stringify(this.output))}submit(){console.log("Submit",this.output),this.output.name?this.dialogService.data.callBackAdded(this.output):this.toastService.showToastWarning("Ch\u01b0a nh\u1eadp t\xean kh\xe1ch h\xe0ng!")}close(){this.ref.close()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(_.S),t.Y36(_.E7),t.Y36(h.O),t.Y36(C.k),t.Y36(f.v))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:6,vars:1,consts:[[1,"wrap-modal"],[1,"wrap-input"],[4,"ngFor","ngForOf"],[1,"d-flex","aligin-items-center","justify-content-end","actions-wrap","mt-4"],["label","Cancel","styleClass","mx-2 p-button-outlined  p-button-secondary","icon","pi pi-times",3,"onClick"],["label","Add","styleClass","p-button-success","icon","pi pi-plus",3,"onClick"],["class","d-flex justify-content-between my-2",4,"ngIf"],[1,"d-flex","justify-content-between","my-2"],[1,"label"],[1,"value-input"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["cols","25","pInputTextarea","",3,"autoResize","ngModel","ngModelChange"],["pInputText","",3,"ngModel","ngModelChange"],["pInputTextarea","",3,"ngModel","ngModelChange"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Z,2,1,"ng-container",2),t.qZA(),t.TgZ(3,"div",3)(4,"p-button",4),t.NdJ("onClick",function(){return i.close()}),t.qZA(),t.TgZ(5,"p-button",5),t.NdJ("onClick",function(){return i.submit()}),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("ngForOf",i.data))},dependencies:[r.sg,r.O5,r.RF,r.n9,r.ED,w.o,M.g,b.zx,p.Fj,p.JJ,p.On],styles:[".wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message{white-space:pre-line;font-size:.8rem}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}@media (max-width: 700px){.wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input textarea, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber>span, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}}"]})}return o})();var y=c(4505),H=c(1989);function E(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"textarea",13),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("autoResize",!0)("ngModel",n.output[e.field])}}function I(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.output[e.field])}}function N(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"textarea",15),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.output[e.field])}}function Q(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"p-checkbox",7),t.NdJ("onChange",function(i){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.checkedChange(i.checked,l.field))}),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",9),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.checkedChange(!0,a.field))}),t.ynx(6,10),t.YNc(7,E,2,2,"ng-container",11),t.YNc(8,I,2,1,"ng-container",11),t.YNc(9,N,2,1,"ng-container",12),t.BQk(),t.qZA()(),t.BQk()}if(2&o){const e=s.$implicit,n=t.oxw();t.xp6(2),t.Q6J("binary",!0)("ngModel",n.updateFields.get(e.field)),t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","link"),t.xp6(1),t.Q6J("ngSwitchCase","string")}}let F=(()=>{class o{constructor(e,n,i,a,l){this.dialogService=e,this.ref=n,this.firebaseService=i,this.toastService=a,this.commonService=l,this.previewHeader=[],this.willChangeHeader=[],this.items=[],this.output={},this.renderLink=y.KJ,this.updateFields=new Map,this.header=this.dialogService.data.data,this.items=this.dialogService.data.items;const d=["name","phone","description","link","address"];this.previewHeader=d.length?this.header.filter(m=>d.includes(m.field)):this.header;const O=["name","phone","description","link","address"];O.forEach(m=>{this.updateFields.set(m,!1)}),this.willChangeHeader=this.header.filter(m=>O.includes(m.field))}ngOnInit(){this.output.status=0}changeValue(e,n){this.output[e.field]=n,console.log(e,n),console.log("output",this.output),this.output=JSON.parse(JSON.stringify(this.output))}submit(){const e={};let n=[],i=0;for(const a in this.output)Object.prototype.hasOwnProperty.call(this.output,a)&&this.updateFields.get(a)&&(e[a]=this.output[a],n.push(`[${a}]`),i++);this.output.name||!this.updateFields.get("name")?!this.output.address&&this.updateFields.get("address")||!this.output.address&&this.updateFields.get("address")?this.toastService.showToastWarning("\u0110\u1ecba ch\u1ec9 kh\xe1ch h\xe0ng \u0111ang tr\u1ed1ng"):this.output.link||!this.updateFields.get("link")?this.output.phone||!this.updateFields.get("phone")?"{}"!==JSON.stringify(e)?(console.log({updateInfo:e}),this.dialogService.data.callBackUpdated(e,`C\u1eadp nh\u1eadt ${i} th\xf4ng tin  ${n.join(", ")} cho ${this.items.length} kh\xe1ch h\xe0ng.`)):this.toastService.showToastWarning("B\u1ea1n kh\xf4ng ch\u1ecdn tr\u01b0\u1eddng n\xe0o \u0111\u1ec3 c\u1eadp nh\u1eadt!"):this.toastService.showToastWarning("S\u0111t kh\xe1ch h\xe0ng \u0111ang tr\u1ed1ng"):this.toastService.showToastWarning("Link kh\xe1ch h\xe0ng \u0111ang tr\u1ed1ng"):this.toastService.showToastWarning("T\xean KH \u0111ang tr\u1ed1ng")}checkedChange(e,n){this.updateFields.set(n,e)}close(){this.ref.close()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(_.S),t.Y36(_.E7),t.Y36(h.O),t.Y36(C.k),t.Y36(f.v))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:6,vars:1,consts:[[1,"wrap-modal"],[1,"wrap-input"],[4,"ngFor","ngForOf"],[1,"d-flex","aligin-items-center","justify-content-end","actions-wrap","mt-4"],["label","Cancel","styleClass","mx-2 p-button-outlined  p-button-secondary","icon","pi pi-times",3,"onClick"],["label","Updated","styleClass","p-button-danger","icon","pi pi-pencil",3,"onClick"],[1,"d-flex","justify-content-between","my-2","align-items-center"],[3,"binary","ngModel","onChange"],[1,"label","ml-2"],[1,"value-input",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["cols","25","pInputTextarea","",3,"autoResize","ngModel","ngModelChange"],["pInputText","",3,"ngModel","ngModelChange"],["pInputTextarea","",3,"ngModel","ngModelChange"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Q,10,6,"ng-container",2),t.qZA(),t.TgZ(3,"div",3)(4,"p-button",4),t.NdJ("onClick",function(){return i.close()}),t.qZA(),t.TgZ(5,"p-button",5),t.NdJ("onClick",function(){return i.submit()}),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("ngForOf",i.willChangeHeader))},dependencies:[r.sg,r.RF,r.n9,r.ED,w.o,M.g,b.zx,H.XZ,p.Fj,p.JJ,p.On],styles:[".wrap-modal[_ngcontent-%COMP%]     .table-preview{max-width:700px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message{white-space:pre-line;font-size:.8rem}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}@media (max-width: 700px){.wrap-modal[_ngcontent-%COMP%]     .table-preview{display:none}.wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input textarea, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber>span, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}}"]})}return o})();var Y=c(7579),x=c(2722),S=c(8746),T=c(805),B=c(7963),u=c(3970),D=c(4076),L=c(3608);function K(o,s){if(1&o&&t._UZ(0,"p-columnFilter",10),2&o){const e=t.oxw().$implicit;t.Q6J("field",e.field)("matchMode",e.filter.matchMode||"contains")("showMatchModes",!1)("showOperator",!1)("showAddButton",!1)("showClearButton",!1)}}function j(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"th",7)(2,"div",8),t._uU(3),t.YNc(4,K,1,6,"p-columnFilter",9),t.qZA()(),t.BQk()),2&o){const e=s.$implicit;t.xp6(1),t.s9C("pSortableColumn",e.field),t.Q6J("ngClass",e.headerClassName)("ngStyle",e.styles),t.xp6(2),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",!e.filter.noFilter)}}function G(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"th",5),t._UZ(2,"p-tableHeaderCheckbox"),t.qZA(),t.YNc(3,j,5,5,"ng-container",6),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.headers)}}function U(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"textarea",22),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw().$implicit;return t.KtG(l[a.field]=i)})("change",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i,a[i.field]))})("keydown",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw().$implicit,d=t.oxw();return t.KtG(d.keyHandler(i,l,a,l[a.field]))}),t.qZA()}if(2&o){const e=t.oxw(2).$implicit,n=t.oxw().$implicit;t.Q6J("ngStyle",e.styles)("autoResize",!0)("ngModel",n[e.field])}}function R(o,s){if(1&o&&t._UZ(0,"div",23),2&o){const e=t.oxw(2).$implicit,n=t.oxw().$implicit,i=t.oxw();t.Q6J("innerHTML",i.renderLink(n[e.field]),t.oJD)}}function z(o,s){1&o&&(t.ynx(0),t.TgZ(1,"p-cellEditor"),t.YNc(2,U,1,3,"ng-template",20),t.YNc(3,R,1,1,"ng-template",21),t.qZA(),t.BQk())}function W(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"input",24),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw().$implicit;return t.KtG(l[a.field]=i)})("change",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i,a[i.field]))})("keydown",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw().$implicit,d=t.oxw();return t.KtG(d.keyHandler(i,l,a,l[a.field]))}),t.qZA(),t.TgZ(1,"span",25),t._uU(2),t.qZA()}if(2&o){const e=t.oxw(2).$implicit,n=t.oxw().$implicit;t.Q6J("ngStyle",e.styles)("ngModel",n[e.field]),t.xp6(2),t.hij(" ",n[e.field],"")}}function V(o,s){if(1&o&&t._uU(0),2&o){const e=t.oxw(2).$implicit,n=t.oxw().$implicit;t.hij(" ",n[e.field]," ")}}function q(o,s){1&o&&(t.ynx(0),t.TgZ(1,"p-cellEditor"),t.YNc(2,W,3,3,"ng-template",20),t.YNc(3,V,1,1,"ng-template",21),t.qZA(),t.BQk())}function X(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"textarea",26),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw().$implicit;return t.KtG(l[a.field]=i)})("change",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i,a[i.field]))})("keydown",function(i){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw().$implicit,d=t.oxw();return t.KtG(d.keyHandler(i,l,a,l[a.field]))}),t.qZA()}if(2&o){const e=t.oxw(2).$implicit,n=t.oxw().$implicit;t.Q6J("ngStyle",e.styles)("ngModel",n[e.field])}}function tt(o,s){if(1&o&&t._uU(0),2&o){const e=t.oxw(2).$implicit,n=t.oxw().$implicit;t.hij(" ",n[e.field]," ")}}function et(o,s){1&o&&(t.ynx(0),t.TgZ(1,"p-cellEditor"),t.YNc(2,X,1,2,"ng-template",20),t.YNc(3,tt,1,1,"ng-template",21),t.qZA(),t.BQk())}function nt(o,s){if(1&o&&(t.TgZ(0,"td",14)(1,"span",15),t._uU(2),t.qZA(),t.TgZ(3,"div",16),t.ynx(4,17),t.YNc(5,z,4,0,"ng-container",18),t.YNc(6,q,4,0,"ng-container",18),t.YNc(7,et,4,0,"ng-container",19),t.BQk(),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw().$implicit;t.Q6J("ngClass",e.className)("pEditableColumn",n[e.field])("pEditableColumnField",e.field),t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("ngStyle",e.styles)("pTooltip",n["tooltip_"+e.field]),t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","link"),t.xp6(1),t.Q6J("ngSwitchCase","string")}}const it=function(o,s){return{"preview-mode":o,newly:s}};function ot(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"tr",11)(2,"td"),t._UZ(3,"p-tableCheckbox",12),t.qZA(),t.YNc(4,nt,8,9,"td",13),t.qZA(),t.BQk()),2&o){const e=s.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngClass",t.WLB(4,it,!n.isEditMode,n.checkNewlyUpdate(e.updated)))("pContextMenuRow",e),t.xp6(2),t.Q6J("value",e),t.xp6(1),t.Q6J("ngForOf",n.headers)}}const at=function(){return[10,25,50,100,500,1e3]},lt=function(){return{flex:1,width:"100%"}};let st=(()=>{class o{constructor(e,n,i,a){this.toastService=e,this.confirmationService=n,this.firebaseService=i,this.commonService=a,this.isEditMode=!1,this.dataTable=[],this.valueChanged=new t.vpe,this.selectMultiItems=new t.vpe,this.contextMenuOutput=new t.vpe,this.selectedItems=[],this.renderLink=y.KJ}ngOnInit(){this.contextMenu=[{label:"Clone a copy",icon:"pi pi-fw pi-copy",command:()=>this.cloneACopy()},{label:"Delete",icon:"pi pi-fw pi-times",command:()=>this.confirmDelete()}]}cloneACopy(){console.log("Copy a row",this.selectedItems),this.contextMenuOutput.emit({type:g.MW.CLONE_A_COPY,value:this.selectedProduct}),this.selectedProduct={}}confirmDelete(){this.confirmationService.confirm({message:`Do you want to delete this record: ${this.selectedProduct.name}?`,header:"Delete Confirmation",icon:"pi pi-info-circle",rejectButtonStyleClass:"bg-danger",accept:()=>{this.contextMenuOutput.emit({type:g.MW.DELETE_ACCEPT,value:this.selectedProduct}),this.selectedProduct={}},reject:e=>{this.contextMenuOutput.emit({type:g.MW.DELETE_REJECT_CANCEL,value:this.selectedProduct}),this.selectedProduct={}}})}changeValue(e,n,i){console.log({item:e},n,i),this.valueChanged.emit({item:e,header:n,value:i})}keyHandler(e,n,i,a){("Enter"===e.key||13===e.keyCode)&&(console.log("Enter",n),this.changeValue(n,i,a))}openMultiHandlerModal(){this.selectMultiItems.emit(this.selectedItems)}checkNewlyUpdate(e){return Date.now()-e<3e3}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(C.k),t.Y36(T.YP),t.Y36(h.O),t.Y36(f.v))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["customer-table"]],inputs:{isEditMode:"isEditMode",dataTable:"dataTable",headers:"headers",selectedItems:"selectedItems",isLoading:"isLoading"},outputs:{valueChanged:"valueChanged",selectMultiItems:"selectMultiItems",contextMenuOutput:"contextMenuOutput"},decls:5,vars:15,consts:[[3,"model"],["cm",""],["responsiveLayout","stack","dataKey","_id","currentPageReportTemplate","{first} - {last} / {totalRecords}",1,"w-full",3,"value","breakpoint","rows","rowsPerPageOptions","paginator","showCurrentPageReport","contextMenuSelection","contextMenu","rowHover","selection","tableStyle","loading","contextMenuSelectionChange","selectionChange"],["pTemplate","header"],["pTemplate","body"],[2,"width","4rem"],[4,"ngFor","ngForOf"],[1,"table-header",3,"ngClass","ngStyle","pSortableColumn"],[1,"flex","align-items-center"],["type","text","display","menu",3,"field","matchMode","showMatchModes","showOperator","showAddButton","showClearButton",4,"ngIf"],["type","text","display","menu",3,"field","matchMode","showMatchModes","showOperator","showAddButton","showClearButton"],[1,"p-selectable-row",3,"ngClass","pContextMenuRow"],[3,"value"],[3,"ngClass","pEditableColumn","pEditableColumnField",4,"ngFor","ngForOf"],[3,"ngClass","pEditableColumn","pEditableColumnField"],[1,"p-column-title","mr-2"],[1,"table-cell",3,"ngStyle","pTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["pTemplate","input"],["pTemplate","output"],["pInputTextarea","",3,"ngStyle","autoResize","ngModel","ngModelChange","change","keydown"],[3,"innerHTML"],["pInputText","",3,"ngStyle","ngModel","ngModelChange","change","keydown"],[1,"invisible"],["pInputTextarea","",3,"ngStyle","ngModel","ngModelChange","change","keydown"]],template:function(n,i){if(1&n&&(t._UZ(0,"p-contextMenu",0,1),t.TgZ(2,"p-table",2),t.NdJ("contextMenuSelectionChange",function(l){return i.selectedProduct=l})("selectionChange",function(l){return i.selectedItems=l})("selectionChange",function(){return i.openMultiHandlerModal()}),t.YNc(3,G,4,1,"ng-template",3),t.YNc(4,ot,5,7,"ng-template",4),t.qZA()),2&n){const a=t.MAs(1);t.Q6J("model",i.contextMenu),t.xp6(2),t.Q6J("value",i.dataTable)("breakpoint","960px")("rows",25)("rowsPerPageOptions",t.DdM(13,at))("paginator",!0)("showCurrentPageReport",!0)("contextMenuSelection",i.selectedProduct)("contextMenu",a)("rowHover",!0)("selection",i.selectedItems)("tableStyle",t.DdM(14,lt))("loading",i.isLoading)}},dependencies:[r.mk,r.sg,r.O5,r.PC,r.RF,r.n9,r.ED,u.iA,T.jx,u.lQ,u.zi,u.Wq,u.YL,u.UA,u.Mo,u.xl,w.o,M.g,D.xV,L.u,p.Fj,p.JJ,p.On],styles:["[_nghost-%COMP%]     td:nth-last-child(1){pointer-events:none;cursor:not-allowed}[_nghost-%COMP%]     .newly td:nth-child(n+2){background-color:#d7ffe6}[_nghost-%COMP%]     .preview-mode td:nth-child(n+2){pointer-events:none;background-color:initial}[_nghost-%COMP%]     .preview-mode td:nth-child(n+2) p-dropdown .p-dropdown.p-component{border:none}[_nghost-%COMP%]     .preview-mode td:nth-child(n+2) p-dropdown .p-dropdown-trigger{display:none}@media only screen and (min-width: 800px){[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{color:#fff;background:#11101d}[_nghost-%COMP%]     .p-datatable-wrapper{height:calc(100vh - 130px)}[_nghost-%COMP%]     .p-datatable-wrapper .p-datatable-thead{position:sticky;top:0;z-index:1}}"]})}return o})(),ct=(()=>{class o{constructor(e,n,i,a){this.toastService=e,this.dialogService=n,this.firebaseService=i,this.confirmationService=a,this.headers=[],this.customersList=[],this.selectedItems=[],this.isEditMode=!0,this.isLoading=!0,this.$destroy=new Y.x}ngOnInit(){this.getTableHeader(),this.getActionsMenu(),this.firebaseService.loadSetting(()=>{this.getData()})}valueChanged(e){console.log(e),this.firebaseService.updateCustomer({[e.header.field]:e.value},e.item._id).pipe((0,x.R)(this.$destroy)).subscribe(()=>{this.toastService.add({severity:"success",summary:`Updated [${e.item.name}]`,detail:`[${e.header.name}] = ${e.value}`}),this.getData()})}showAddModal(){this.ref=this.dialogService.open(J,{header:"Kh\xe1ch h\xe0ng m\u1edbi",contentStyle:{overflow:"auto"},maximizable:!0,baseZIndex:1e4,data:{data:this.headers,callBackAdded:e=>{this.addItem(e)}}})}contextMenuClick(e){switch(console.log(e),e.type){case g.MW.DELETE_ACCEPT:this.firebaseService.deleteCustomer(e.value._id).subscribe(()=>{this.toastService.showToastSuccess(`Deleted customer: ${e.value.name}`),this.getData()});break;case g.MW.CLONE_A_COPY:this.addItem(e.value)}}selectMultiItems(e){this.ref=this.dialogService.open(F,{header:"C\u1eadp nh\u1eadt kh\xe1ch h\xe0ng c\xf9ng l\xfac!",contentStyle:{overflow:"auto"},maximizable:!0,baseZIndex:1e4,data:{items:e,data:this.headers,callBackUpdated:(n,i)=>{console.log({output:n}),this.confirmationService.confirm({message:i,header:"Update Confirmation",icon:"pi pi-info-circle",rejectButtonStyleClass:"bg-danger",accept:()=>{this.updateItem(n,e,i)},reject:()=>{}})}}})}getTableHeader(){this.headers=[{name:"T\xean KH",field:"name",type:"link",className:"custom-link",filter:{},styles:{}},{name:"S\u0110T",field:"phone",type:"string",filter:{},styles:{width:"160px","min-width":"140px","text-align":"center"}},{name:"Link",field:"link",type:"link",className:"custom-link",filter:{},styles:{"max-width":"300px"}},{name:"Ghi ch\xfa",field:"description",type:"area",filter:{},styles:{wordBreak:"break-all","max-width":"400px"}},{name:"\u0110\u1ecba ch\u1ec9",field:"address",type:"area",filter:{},styles:{wordBreak:"break-all"}}]}getActionsMenu(){this.actionMenuItems=[{icon:this.isEditMode?"pi pi-eye":"pi pi-pencil",tooltip:this.isEditMode?"S\u1eeda nhi\u1ec1u d\xf2ng c\xf9ng l\xfac":"Tr\u1edf v\u1ec1 ch\u1ebf \u0111\u1ed9 xem",command:()=>{this.isEditMode?(this.isEditMode=!1,this.getActionsMenu()):this.confirmationService.confirm({message:"C\xe1c thay \u0111\u1ed5i s\u1ebd \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng ngay l\u1eadp t\u1ee9c, dev kh\xf4ng th\u1ec3 kh\xf4i ph\u1ee5c khi b\u1ea1n l\u1ee1 tay s\u1eeda nh\u1ea7m ;) ",header:"EDIT MODE",icon:"pi pi-info-circle",acceptButtonStyleClass:"bg-danger",rejectButtonStyleClass:"bg-success",accept:()=>{this.isEditMode=!0,this.getActionsMenu()},reject:()=>{this.isEditMode=!1,this.getActionsMenu()}})}},{icon:"pi pi-trash",tooltip:"X\xf3a c\xe1c d\xf2ng \u0111\xe3 ch\u1ecdn",command:()=>{this.selectedItems.length?this.confirmationService.confirm({message:`X\xf3a ${this.selectedItems.length} kh\xe1ch h\xe0ng \u0111ang ch\u1ecdn?`,header:"Delete Confirmation",icon:"pi pi-info-circle",acceptButtonStyleClass:"bg-danger",rejectButtonStyleClass:"bg-success",defaultFocus:"reject",accept:()=>{this.firebaseService.deleteCustomers(this.selectedItems).subscribe(e=>{this.toastService.showToastSuccess(`X\xf3a ${this.selectedItems.length} kh\xe1ch h\xe0ng th\xe0nh c\xf4ng!`),this.getData()})},reject:()=>{}}):this.toastService.showToastWarning("H\xe3y ch\u1ecdn \xedt nh\u1ea5t 1 kh\xe1ch h\xe0ng \u0111\u1ec3 x\xf3a!")}},{icon:"pi pi-external-link",command:()=>{this.selectedItems.length?this.selectMultiItems(this.selectedItems):this.toastService.showToastWarning("H\xe3y ch\u1ecdn \xedt nh\u1ea5t 1 kh\xe1ch h\xe0ng \u0111\u1ec3 update!")}},{icon:"pi pi-plus",command:()=>{this.showAddModal()}}]}getData(){this.isLoading=!0,this.selectedItems=[],this.customersList=[],this.firebaseService.getCustomers().pipe((0,x.R)(this.$destroy),(0,S.x)(()=>this.isLoading=!1)).subscribe(e=>{console.log(e),this.customersList=e})}addItem(e){this.firebaseService.addCustomer(e).pipe((0,x.R)(this.$destroy)).subscribe(n=>{console.log("added",n),this.toastService.showToastSuccess(`Added new customer ${e.name} successfully!`),this.getData()})}updateItem(e,n,i){this.isLoading=!0,this.firebaseService.updateCustomers(e,n).pipe((0,x.R)(this.$destroy),(0,S.x)(()=>this.isLoading=!1)).subscribe(a=>{this.toastService.showToastSuccess(`${i} successfully!`),this.ref.close(),this.getData()})}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete(),this.ref&&this.ref.close()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(C.k),t.Y36(_.xA),t.Y36(h.O),t.Y36(T.YP))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:3,vars:7,consts:[[3,"headers","dataTable","isEditMode","selectedItems","isLoading","valueChanged","contextMenuOutput","selectMultiItems"],[1,"flat-button-add"],[3,"model","hideOnClickOutside"]],template:function(n,i){1&n&&(t.TgZ(0,"customer-table",0),t.NdJ("valueChanged",function(l){return i.valueChanged(l)})("contextMenuOutput",function(l){return i.contextMenuClick(l)})("selectMultiItems",function(l){return i.selectedItems=l}),t.qZA(),t.TgZ(1,"div",1),t._UZ(2,"p-speedDial",2),t.qZA()),2&n&&(t.Q6J("headers",i.headers)("dataTable",i.customersList)("isEditMode",i.isEditMode)("selectedItems",i.selectedItems)("isLoading",i.isLoading),t.xp6(2),t.Q6J("model",i.actionMenuItems)("hideOnClickOutside",!1))},dependencies:[B.V,st],styles:["customer-table .image-col img{width:100px}[_nghost-%COMP%]     .flat-button-add{position:fixed;bottom:320px;right:80px}[_nghost-%COMP%]     .flat-button-add .p-speeddial-action{text-decoration:none}"]})}return o})();var rt=c(5263),pt=c(3913);const dt=[{path:"",component:ct}];let ut=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({providers:[_.xA],imports:[r.ez,rt.Bz.forChild(dt),pt.m,p.UX,p.u5]})}return o})()}}]);