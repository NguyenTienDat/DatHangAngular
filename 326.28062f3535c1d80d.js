"use strict";(self.webpackChunkDatHangAngular=self.webpackChunkDatHangAngular||[]).push([[326],{6326:(ft,w,c)=>{c.r(w),c.d(w,{FacebookModule:()=>ht});var r=c(6895),_=c(7486),m=c(4505),t=c(4650),d=c(5849),h=c(7455),f=c(8735),M=c(9717),v=c(859),x=c(805),b=c(666),T=c(1740),y=c(3054),S=c(7188),O=c(5593),p=c(4006);function $(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-image-select",13),t.NdJ("imageOutput",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=o)}),t.qZA(),t.BQk()}}function H(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"textarea",14),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=o)})("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,o))}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("autoResize",!0)("ngModel",n.output[e.field])}}function F(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",15),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=o)})("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,o))}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.output[e.field])}}function Q(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"p-inputNumber",16),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=o)})("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.commonService.autoCalculatePrices(l.output,a,o))}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();let o;t.xp6(1),t.Q6J("minFractionDigits",0)("maxFractionDigits",5)("inputStyleClass",null!==(o=e.className)&&void 0!==o?o:"input-number")("ngModel",n.output[e.field])}}const Z=function(){return[]};function E(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"p-dropdown",17),t.NdJ("onChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,o.value))}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit;let n;t.xp6(1),t.Q6J("filter",!e.filter.noFilterOnRow)("options",null!==(n=e.filter.dropdownOptions)&&void 0!==n?n:t.DdM(4,Z))("showClear",!1)("readonly",!1)}}function D(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"textarea",19),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=o)})("ngModelChange",function(o){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.changeValue(a,o))}),t.qZA()}if(2&i){const e=t.oxw(2).$implicit,n=t.oxw();t.Q6J("ngModel",n.output[e.field])}}function P(i,s){1&i&&(t.ynx(0),t.YNc(1,D,1,1,"ng-template",18),t.BQk())}function I(i,s){if(1&i&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",n.output["tooltip_"+e.field]," ")}}function Y(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"div",6)(2,"div",7),t._uU(3),t.qZA(),t.TgZ(4,"div",8),t.ynx(5,9),t.YNc(6,$,2,0,"ng-container",10),t.YNc(7,H,2,2,"ng-container",10),t.YNc(8,F,2,1,"ng-container",10),t.YNc(9,Q,2,4,"ng-container",10),t.YNc(10,E,2,5,"ng-container",10),t.YNc(11,P,2,0,"ng-container",11),t.BQk(),t.YNc(12,I,2,1,"div",12),t.qZA()(),t.BQk()),2&i){const e=s.$implicit,n=t.oxw();t.xp6(3),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","image"),t.xp6(1),t.Q6J("ngSwitchCase","link"),t.xp6(1),t.Q6J("ngSwitchCase","string"),t.xp6(1),t.Q6J("ngSwitchCase","number"),t.xp6(1),t.Q6J("ngSwitchCase","dropdown"),t.xp6(2),t.Q6J("ngIf",n.output["tooltip_"+e.field])}}let B=(()=>{class i{constructor(e,n,o,a,l){this.dialogService=e,this.ref=n,this.firebaseService=o,this.toastService=a,this.commonService=l,this.output={},this.IMG_DEFAULT=m.jC,this.data=this.dialogService.data.data}ngOnInit(){this.output.status=0,this.output.weight_price=this.firebaseService.DEFAULT_WEIGHT_PRICE$.value,this.output.exchange=this.firebaseService.DEFAULT_EXCHANGE$.value}changeValue(e,n){this.output[e.field]=n,console.log(e,n),console.log("output",this.output),this.output=JSON.parse(JSON.stringify(this.output))}submit(){console.log("Submit",this.output),this.output.customer?this.dialogService.data.callBackAdded(this.output):this.toastService.showToastWarning("Ch\u01b0a nh\u1eadp t\xean kh\xe1ch h\xe0ng!")}close(){this.ref.close()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(d.S),t.Y36(d.E7),t.Y36(h.O),t.Y36(f.k),t.Y36(M.v))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-modal"]],decls:6,vars:1,consts:[[1,"wrap-modal"],[1,"wrap-input"],[4,"ngFor","ngForOf"],[1,"d-flex","aligin-items-center","justify-content-end","actions-wrap","mt-4"],["label","Cancel","styleClass","mx-2 p-button-outlined  p-button-secondary","icon","pi pi-times",3,"onClick"],["label","Add","styleClass","p-button-success","icon","pi pi-plus",3,"onClick"],[1,"d-flex","justify-content-between","my-2"],[1,"label"],[1,"value-input"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","mt-2 message text-info",4,"ngIf"],[3,"imageOutput"],["cols","25","pInputTextarea","",3,"autoResize","ngModel","ngModelChange"],["pInputText","",3,"ngModel","ngModelChange"],["mode","decimal",3,"minFractionDigits","maxFractionDigits","inputStyleClass","ngModel","ngModelChange"],["id","value","optionLabel","name","optionValue","value",3,"filter","options","showClear","readonly","onChange"],["pTemplate","input"],["pInputTextarea","",3,"ngModel","ngModelChange"],[1,"mt-2","message","text-info"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Y,13,8,"ng-container",2),t.qZA(),t.TgZ(3,"div",3)(4,"p-button",4),t.NdJ("onClick",function(){return o.close()}),t.qZA(),t.TgZ(5,"p-button",5),t.NdJ("onClick",function(){return o.submit()}),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("ngForOf",o.data))},dependencies:[r.sg,r.O5,r.RF,r.n9,r.ED,v.Y,x.jx,b.Lt,T.o,y.g,S.Rn,O.zx,p.Fj,p.JJ,p.On],styles:[".wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message{white-space:pre-line;font-size:.8rem}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}@media (max-width: 700px){.wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input textarea, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber>span, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}}"]})}return i})();var L=c(1989),A=c(2174);function G(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"th",8)(2,"div",9),t._uU(3),t.qZA()(),t.BQk()),2&i){const e=s.$implicit;t.xp6(1),t.Q6J("ngClass",e.headerClassName)("ngStyle",e.styles),t.xp6(2),t.hij(" ",e.name," ")}}function U(i,s){if(1&i&&(t.ynx(0),t._UZ(1,"img",17,18),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("src",n[e.field]||o.IMG_DEFAULT,t.LSH)}}function j(i,s){if(1&i&&(t.ynx(0),t._UZ(1,"div",19),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("innerHTML",o.renderLink(n[e.field]),t.oJD)}}function K(i,s){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n[e.field]," ")}}function R(i,s){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",0==+n[e.field]?"-":t.lcZ(2,1,+n[e.field])," ")}}const N=function(){return[]};function W(i,s){if(1&i&&(t.ynx(0),t._UZ(1,"p-dropdown",20),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;let o;t.xp6(1),t.Q6J("options",null!==(o=e.filter.dropdownOptions)&&void 0!==o?o:t.DdM(6,N))("showClear",!1)("ngModel",n[e.field])("readonly",!0)("ngStyle",e.styles)("styleClass","bg-light")}}function V(i,s){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n[e.field]," ")}}function z(i,s){if(1&i&&(t.TgZ(0,"td",12)(1,"div",13),t.ynx(2,14),t.YNc(3,U,3,1,"ng-container",15),t.YNc(4,j,2,1,"ng-container",15),t.YNc(5,K,2,1,"ng-container",15),t.YNc(6,R,3,3,"ng-container",15),t.YNc(7,W,2,7,"ng-container",15),t.YNc(8,V,2,1,"ng-container",16),t.BQk(),t.qZA()()),2&i){const e=s.$implicit;t.Q6J("ngClass",e.className),t.xp6(1),t.Q6J("ngStyle",e.styles),t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","image"),t.xp6(1),t.Q6J("ngSwitchCase","link"),t.xp6(1),t.Q6J("ngSwitchCase","string"),t.xp6(1),t.Q6J("ngSwitchCase","number"),t.xp6(1),t.Q6J("ngSwitchCase","dropdown")}}function X(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",10),t.YNc(2,z,9,8,"td",11),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.previewHeader)}}function q(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-image-select",26),t.NdJ("imageOutput",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=o)}),t.qZA(),t.BQk()}}function tt(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=o)})("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,o))}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("autoResize",!0)("ngModel",n.output[e.field])}}function et(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",28),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=o)})("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,o))}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.output[e.field])}}function nt(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"p-inputNumber",29),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=o)})("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.commonService.autoCalculatePrices(l.output,a,o))}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();let o;t.xp6(1),t.Q6J("minFractionDigits",0)("maxFractionDigits",5)("inputStyleClass",null!==(o=e.className)&&void 0!==o?o:"input-number")("ngModel",n.output[e.field])}}function it(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"p-dropdown",30),t.NdJ("onChange",function(o){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,o.value))}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit;let n;t.xp6(1),t.Q6J("options",null!==(n=e.filter.dropdownOptions)&&void 0!==n?n:t.DdM(3,N))("showClear",!1)("readonly",!1)}}function ot(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"textarea",32),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=o)})("ngModelChange",function(o){t.CHM(e);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.changeValue(a,o))}),t.qZA()}if(2&i){const e=t.oxw(2).$implicit,n=t.oxw();t.Q6J("ngModel",n.output[e.field])}}function at(i,s){1&i&&(t.ynx(0),t.YNc(1,ot,1,1,"ng-template",31),t.BQk())}function lt(i,s){if(1&i&&(t.TgZ(0,"div",33),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",n.output["tooltip_"+e.field]," ")}}function st(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",21)(2,"p-checkbox",22),t.NdJ("onChange",function(o){const l=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.checkedChange(o.checked,l.field))}),t.qZA(),t.TgZ(3,"div",23),t._uU(4),t.qZA(),t.TgZ(5,"div",24),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.checkedChange(!0,a.field))}),t.ynx(6,14),t.YNc(7,q,2,0,"ng-container",15),t.YNc(8,tt,2,2,"ng-container",15),t.YNc(9,et,2,1,"ng-container",15),t.YNc(10,nt,2,4,"ng-container",15),t.YNc(11,it,2,4,"ng-container",15),t.YNc(12,at,2,0,"ng-container",16),t.BQk(),t.YNc(13,lt,2,1,"div",25),t.qZA()(),t.BQk()}if(2&i){const e=s.$implicit,n=t.oxw();t.xp6(2),t.Q6J("binary",!0)("ngModel",n.updateFields.get(e.field)),t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","image"),t.xp6(1),t.Q6J("ngSwitchCase","link"),t.xp6(1),t.Q6J("ngSwitchCase","string"),t.xp6(1),t.Q6J("ngSwitchCase","number"),t.xp6(1),t.Q6J("ngSwitchCase","dropdown"),t.xp6(2),t.Q6J("ngIf",n.output["tooltip_"+e.field])}}let ct=(()=>{class i{constructor(e,n,o,a,l){this.dialogService=e,this.ref=n,this.firebaseService=o,this.toastService=a,this.commonService=l,this.previewHeader=[],this.willChangeHeader=[],this.items=[],this.output={},this.IMG_DEFAULT=m.jC,this.renderLink=m.KJ,this.updateFields=new Map,this.header=this.dialogService.data.data,this.items=this.dialogService.data.items;const C=["imageLink","customer","description","status"];this.previewHeader=this.header.filter(g=>C.includes(g.field));const k=["imageLink","status","CNY_price","exchange","weight_price","orderID","customer","price","price2","weight"];k.forEach(g=>{this.updateFields.set(g,!1)}),this.willChangeHeader=this.header.filter(g=>k.includes(g.field))}ngOnInit(){this.output.status=0,this.output.weight_price=this.firebaseService.DEFAULT_WEIGHT_PRICE$.value,this.output.exchange=this.firebaseService.DEFAULT_EXCHANGE$.value}changeValue(e,n){this.output[e.field]=n,console.log(e,n),console.log("output",this.output),this.output=JSON.parse(JSON.stringify(this.output))}submit(){const e={};let n=[],o=0;for(const a in this.output)Object.prototype.hasOwnProperty.call(this.output,a)&&this.updateFields.get(a)&&(e[a]=this.output[a],n.push(`[${a}]`),o++);this.output.imageLink||!this.updateFields.get("imageLink")?this.output.orderID||!this.updateFields.get("orderID")?this.output.customer||!this.updateFields.get("customer")?!isNaN(this.output.CNY_price)&&this.output.CNY_price||!this.updateFields.get("CNY_price")?!isNaN(this.output.price)&&this.output.price||!this.updateFields.get("price")?!isNaN(this.output.price2)&&this.output.price2||!this.updateFields.get("price2")?!isNaN(this.output.weight)&&this.output.weight||!this.updateFields.get("weight")?"{}"!==JSON.stringify(e)?(console.log({updateInfo:e}),this.dialogService.data.callBackUpdated(e,`C\u1eadp nh\u1eadt ${o} th\xf4ng tin  ${n.join(", ")} cho ${this.items.length} \u0111\u01a1n h\xe0ng.`)):this.toastService.showToastWarning("B\u1ea1n kh\xf4ng ch\u1ecdn tr\u01b0\u1eddng n\xe0o \u0111\u1ec3 c\u1eadp nh\u1eadt!"):this.toastService.showToastWarning("C\xe2n \u0111ang b\u1ecb b\u1ecf tr\u1ed1ng"):this.toastService.showToastWarning("Gi\xe1 b\xe1n \u0111ang b\u1ecb b\u1ecf tr\u1ed1ng"):this.toastService.showToastWarning("Gi\xe1 nh\u1eadp \u0111ang b\u1ecb b\u1ecf tr\u1ed1ng"):this.toastService.showToastWarning("T\u1ec7 \u0111ang b\u1ecb b\u1ecf tr\u1ed1ng"):this.toastService.showToastWarning("T\xean kh\xe1ch h\xe0ng \u0111ang tr\u1ed1ng"):this.toastService.showToastWarning("M\xe3 v\u1eadn \u0111\u01a1n \u0111ang tr\u1ed1ng"):this.toastService.showToastWarning("Ch\u01b0a ch\u1ecdn \u1ea3nh")}checkedChange(e,n){this.updateFields.set(n,e)}close(){this.ref.close()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(d.S),t.Y36(d.E7),t.Y36(h.O),t.Y36(f.k),t.Y36(M.v))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-multi-handler-modal"]],decls:13,vars:4,consts:[[1,"wrap-modal"],[1,"table-preview"],[3,"header"],[4,"ngFor","ngForOf"],[1,"wrap-input"],[1,"d-flex","aligin-items-center","justify-content-end","actions-wrap","mt-4"],["label","Cancel","styleClass","mx-2 p-button-outlined  p-button-secondary","icon","pi pi-times",3,"onClick"],["label","Updated","styleClass","p-button-danger","icon","pi pi-pencil",3,"onClick"],[1,"table-header",3,"ngClass","ngStyle"],[1,"flex","align-items-center"],[1,"p-selectable-row"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"table-cell",3,"ngStyle"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["width","100",1,"cursor-pointer",3,"src"],["image",""],[3,"innerHTML"],["id","value","optionLabel","name","optionValue","value",3,"options","showClear","ngModel","readonly","ngStyle","styleClass"],[1,"d-flex","justify-content-between","my-2","align-items-center"],[3,"binary","ngModel","onChange"],[1,"label","ml-2"],[1,"value-input",3,"click"],["class","mt-2 message text-info",4,"ngIf"],[3,"imageOutput"],["cols","25","pInputTextarea","",3,"autoResize","ngModel","ngModelChange"],["pInputText","",3,"ngModel","ngModelChange"],["mode","decimal",3,"minFractionDigits","maxFractionDigits","inputStyleClass","ngModel","ngModelChange"],["id","value","optionLabel","name","optionValue","value",3,"options","showClear","readonly","onChange"],["pTemplate","input"],["pInputTextarea","",3,"ngModel","ngModelChange"],[1,"mt-2","message","text-info"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-accordion")(3,"p-accordionTab",2)(4,"table")(5,"tr"),t.YNc(6,G,4,3,"ng-container",3),t.qZA(),t.YNc(7,X,3,1,"ng-container",3),t.qZA()()()(),t.TgZ(8,"div",4),t.YNc(9,st,14,10,"ng-container",3),t.qZA(),t.TgZ(10,"div",5)(11,"p-button",6),t.NdJ("onClick",function(){return o.close()}),t.qZA(),t.TgZ(12,"p-button",7),t.NdJ("onClick",function(){return o.submit()}),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("header",o.items.length+" \u0111\u01a1n h\xe0ng s\u1ebd \u0111\u01b0\u1ee3c update!"),t.xp6(3),t.Q6J("ngForOf",o.previewHeader),t.xp6(1),t.Q6J("ngForOf",o.items),t.xp6(2),t.Q6J("ngForOf",o.willChangeHeader))},dependencies:[r.mk,r.sg,r.O5,r.PC,r.RF,r.n9,r.ED,v.Y,x.jx,b.Lt,T.o,y.g,S.Rn,O.zx,L.XZ,A.UQ,A.US,p.Fj,p.JJ,p.On,r.JJ],styles:[".wrap-modal[_ngcontent-%COMP%]     .table-preview{max-width:700px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message{white-space:pre-line;font-size:.8rem}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}@media (max-width: 700px){.wrap-modal[_ngcontent-%COMP%]     .table-preview{display:none}.wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input textarea, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber>span, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}}"]})}return i})();var rt=c(7579),u=c(2722),J=c(8746),pt=c(4683),dt=c(7963);let ut=(()=>{class i{constructor(e,n,o,a){this.toastService=e,this.dialogService=n,this.firebaseService=o,this.confirmationService=a,this.numberDefaultConfig={name:"",field:"",type:"number",filter:{noFilter:!0},styles:{width:"80px","min-width":"5vw","text-align":"right"}},this.headers=[],this.orders=[],this.selectedItems=[],this.isEditMode=!1,this.isLoading=!0,this.$destroy=new rt.x,this.customersList=[]}ngOnInit(){this.getActionsMenu(),this.firebaseService.loadSetting(()=>{this.firebaseService.getCustomers().subscribe(e=>{this.customersList=e,this.getTableHeader()}),this.firebaseService.DROPDOWN_STATUS_SELECTED$.asObservable().pipe((0,u.R)(this.$destroy)).subscribe(e=>{this.getData(e)})})}valueChanged(e){console.log(e);const n={[e.header.field]:e.value};"number"===e.header.type&&(n.price=e.item.price,n.price2=e.item.price2),this.firebaseService.fbUpdateProduct(n,e.item._id).pipe((0,u.R)(this.$destroy)).subscribe(()=>{this.toastService.add({severity:"success",summary:`Updated [${e.item.customer}]`,detail:`[${e.header.name}] = ${e.value}`}),this.getData()})}showAddModal(){this.ref=this.dialogService.open(B,{header:"\u0110\u01a1n h\xe0ng m\u1edbi",contentStyle:{overflow:"auto"},maximizable:!0,baseZIndex:1e4,data:{data:this.headers,callBackAdded:e=>{this.addItem(e)}}})}contextMenuClick(e){switch(console.log(e),e.type){case _.MW.DELETE_ACCEPT:this.firebaseService.fbDeleteProduct(e.value._id).subscribe(()=>{this.toastService.showToastSuccess(`Deleted record: ${e.value.customer}`),this.getData()});break;case _.MW.DELETE_REJECT_CANCEL:break;case _.MW.CLONE_A_COPY:this.addItem(e.value)}}selectMultiItems(e){this.ref=this.dialogService.open(ct,{header:"C\u1eadp nh\u1eadt nhi\u1ec1u \u0111\u01a1n h\xe0ng c\xf9ng l\xfac!",contentStyle:{overflow:"auto"},maximizable:!0,baseZIndex:1e4,data:{items:e,data:this.headers,callBackUpdated:(n,o)=>{console.log({output:n}),this.confirmationService.confirm({message:o,header:"Update Confirmation",icon:"pi pi-info-circle",rejectButtonStyleClass:"bg-danger",accept:()=>{this.updateItem(n,e,o)},reject:()=>{}})}}})}getTableHeader(){this.headers=[{name:"Image",field:"imageLink",type:"image",className:"image-col",filter:{noFilter:!0},styles:{"min-width":"100px",width:"100px"}},{name:"Ph\xe2n lo\u1ea1i",field:"prop",type:"string",filter:{noFilter:!0},styles:{"min-width":"100px",width:"100px"}},{name:"Kh\xe1ch h\xe0ng",field:"customer",type:"dropdown",filter:{dropdownOptions:this.customersList,filterValue:[],matchMode:"in"},styles:{wordBreak:"break-all"}},{name:"Ghi ch\xfa",field:"description",type:"string",filter:{},styles:{wordBreak:"break-all",width:"100%","min-width":"100px"}},{name:"Tr\u1ea1ng th\xe1i",field:"status",type:"dropdown",filter:{dropdownOptions:_.dl,filterValue:this.firebaseService.DROPDOWN_STATUS_SELECTED$.value,matchMode:"in",noFilterOnRow:!0},styles:{width:"150px","min-width":"150px","text-align":"center"}},{name:"MV\u0110",field:"orderID",type:"string",filter:{},styles:{"min-width":"50px"}},{...this.numberDefaultConfig,name:"T\u1ec7",field:"CNY_price",className:"text-danger"},{...this.numberDefaultConfig,name:"C\xe2n",field:"weight",className:"text-danger"},{...this.numberDefaultConfig,name:"Gi\xe1 c\xe2n",field:"weight_price",className:"text-danger"},{...this.numberDefaultConfig,name:"T\u1ec9 gi\xe1",field:"exchange",className:"text-danger"},{...this.numberDefaultConfig,name:"Gi\xe1 nh\u1eadp",field:"price",className:"text-info"},{...this.numberDefaultConfig,name:"Gi\xe1 b\xe1n",field:"price2",className:"text-primary"}]}getActionsMenu(){this.actionMenuItems=[{icon:this.isEditMode?"pi pi-eye":"pi pi-pencil",tooltip:this.isEditMode?"S\u1eeda nhi\u1ec1u d\xf2ng c\xf9ng l\xfac":"Tr\u1edf v\u1ec1 ch\u1ebf \u0111\u1ed9 xem",command:()=>{this.isEditMode?(this.isEditMode=!1,this.getActionsMenu()):this.confirmationService.confirm({message:"C\xe1c thay \u0111\u1ed5i s\u1ebd \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng ngay l\u1eadp t\u1ee9c, dev kh\xf4ng th\u1ec3 kh\xf4i ph\u1ee5c khi b\u1ea1n l\u1ee1 tay s\u1eeda nh\u1ea7m ;) ",header:"EDIT MODE",icon:"pi pi-info-circle",acceptButtonStyleClass:"bg-danger",rejectButtonStyleClass:"bg-success",accept:()=>{this.isEditMode=!0,this.getActionsMenu()},reject:()=>{this.isEditMode=!1,this.getActionsMenu()}})}},{icon:"pi pi-trash",tooltip:"X\xf3a c\xe1c d\xf2ng \u0111\xe3 ch\u1ecdn",command:()=>{this.selectedItems.length?this.confirmationService.confirm({message:`X\xf3a ${this.selectedItems.length} \u0111\u01a1n h\xe0ng \u0111ang ch\u1ecdn?`,header:"Delete Confirmation",icon:"pi pi-info-circle",acceptButtonStyleClass:"bg-danger",rejectButtonStyleClass:"bg-success",defaultFocus:"reject",accept:()=>{this.firebaseService.fbDeleteProducts(this.selectedItems).subscribe(e=>{this.toastService.showToastSuccess(`X\xf3a ${this.selectedItems.length} \u0111\u01a1n h\xe0ng th\xe0nh c\xf4ng!`),this.getData()})},reject:()=>{}}):this.toastService.showToastWarning("H\xe3y ch\u1ecdn \xedt nh\u1ea5t 1 \u0111\u01a1n h\xe0ng \u0111\u1ec3 x\xf3a!")}},{icon:"pi pi-external-link",command:()=>{this.selectedItems.length?this.selectMultiItems(this.selectedItems):this.toastService.showToastWarning("H\xe3y ch\u1ecdn \xedt nh\u1ea5t 1 \u0111\u01a1n h\xe0ng \u0111\u1ec3 update!")}},{icon:"pi pi-plus",command:()=>{this.showAddModal()}}]}getData(e=this.firebaseService.DROPDOWN_STATUS_SELECTED$.value){this.isLoading=!0,this.selectedItems=[],this.orders=[],this.firebaseService.fbQueryProducts(e).pipe((0,u.R)(this.$destroy),(0,J.x)(()=>this.isLoading=!1)).subscribe(n=>{console.log(n),n.sort((o,a)=>o.created<a.created?1:-1),this.orders=n})}addItem(e){this.firebaseService.fbAddProducts(e).pipe((0,u.R)(this.$destroy)).subscribe(n=>{console.log("added",n),this.toastService.showToastSuccess(`Added new order ${e.customer} successfully!`),this.getData()})}updateItem(e,n,o){this.isLoading=!0,this.firebaseService.fbUpdateProducts(e,n).pipe((0,u.R)(this.$destroy),(0,J.x)(()=>this.isLoading=!1)).subscribe(a=>{this.toastService.showToastSuccess(`${o} successfully!`),this.ref.close(),this.getData()})}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete(),this.ref&&this.ref.close()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(f.k),t.Y36(d.xA),t.Y36(h.O),t.Y36(x.YP))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-facebook"]],decls:3,vars:7,consts:[[3,"headers","dataTable","isEditMode","selectedItems","isLoading","valueChanged","contextMenuOutput","selectMultiItems"],[1,"flat-button-add"],[3,"model","hideOnClickOutside"]],template:function(n,o){1&n&&(t.TgZ(0,"facebook-table",0),t.NdJ("valueChanged",function(l){return o.valueChanged(l)})("contextMenuOutput",function(l){return o.contextMenuClick(l)})("selectMultiItems",function(l){return o.selectedItems=l}),t.qZA(),t.TgZ(1,"div",1),t._UZ(2,"p-speedDial",2),t.qZA()),2&n&&(t.Q6J("headers",o.headers)("dataTable",o.orders)("isEditMode",o.isEditMode)("selectedItems",o.selectedItems)("isLoading",o.isLoading),t.xp6(2),t.Q6J("model",o.actionMenuItems)("hideOnClickOutside",!1))},dependencies:[pt.C,dt.V],styles:["facebook-table .image-col img{width:100px}[_nghost-%COMP%]     .flat-button-add{position:fixed;bottom:320px;right:80px}[_nghost-%COMP%]     .flat-button-add .p-speeddial-action{text-decoration:none}"]})}return i})();var gt=c(5263),_t=c(3913);const mt=[{path:"",component:ut}];let ht=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({providers:[d.xA],imports:[r.ez,gt.Bz.forChild(mt),_t.m,p.UX,p.u5]})}return i})()}}]);